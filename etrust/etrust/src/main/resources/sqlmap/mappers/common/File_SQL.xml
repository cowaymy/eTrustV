<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.coway.trust.biz.common.impl.FileMapper">


    <select id="selectFileGroupKey" resultType="int">
        SELECT SYS0070M_ATCH_FILE_GRP_ID_SEQ.NEXTVAL FROM DUAL
    </select>

    <insert id="insertFileGroup" parameterType="fileGroupVO">
        INSERT INTO SYS0070M (
        ATCH_FILE_GRP_ID
        , ATCH_FILE_ID
        , CHENAL_TYPE
        , CRT_USER_ID
        , CRT_DT
        , UPD_USER_ID
        , UPD_DT
        )VALUES (
        #{atchFileGrpId}
        ,#{atchFileId}
        ,#{chenalType}
        ,#{crtUserId}
        ,SYSDATE
        ,#{crtUserId}
        ,SYSDATE
        )
    </insert>

    <insert id="insertFileDetail" parameterType="fileVO">

        <selectKey keyProperty="atchFileId" resultType="int" order="BEFORE">
            SELECT SYS0071D_ATCH_FILE_ID_SEQ.NEXTVAL atchFileId
            FROM DUAL
        </selectKey>

        INSERT INTO SYS0071D (
        ATCH_FILE_ID
        , ATCH_FILE_NAME
        , FILE_SUB_PATH
        , PHYSICL_FILE_NAME
        , FILE_EXTSN
        , FILE_SIZE
        , FILE_PASSWORD
        )VALUES (
        #{atchFileId}
        ,#{atchFileName}
        ,#{fileSubPath}
        ,#{physiclFileName}
        ,#{fileExtsn}
        ,#{fileSize}
        ,#{filePassword}
        )
    </insert>

</mapper>