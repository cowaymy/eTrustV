<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.coway.trust.biz.logistics.bom.impl.BomMapper">
    <select id="selectCdcList" parameterType="Map" resultType="EgovMap">
	SELECT   
	    WH_LOC_CODE code_id,
	    DBMS_LOB.SUBSTR (WH_LOC_DESC, 4000) code_name
	    FROM SYS0028M
	  WHERE WH_LOC_TYPE_ID = 277
	       ORDER BY WH_LOC_CODE
    </select>
    
    <select id="selectBomList" parameterType="Map" resultType="egovMap">
        SELECT 
            m.BOM  bom ,
            m.ALTRTIV_BOM  altrtiv_bom ,
            m.PLANT  plant ,
            m.MATRL_NO  matrl_no ,
            m.BOM_USE  bom_use ,
            d.BOM_ITM_NODE_NO  bom_itm_node_no ,
            d.BOM_CTGRY  bom_ctgry ,
            d.INTNL_CNTR  intnl_cntr ,
            d.ITM_CTGRY  itm_ctgry ,
            d.BOM_ITM_NO  bom_itm_no ,
            d.SORT_STRING  sort_string ,
            d.BOM_COMPNT  bom_compnt ,
            m2.STK_DESC stk_desc,
            sm.CODE_NAME category,
            d.COMPNT_QTY  compnt_qty ,
            d.COMPNT_UNIT_OF_MEASURE  compnt_unit_of_measure ,
            TO_CHAR(d.VALID_FROM_DT, 'YYYY-MM-DD')  valid_from_dt ,
            TO_CHAR(d.VALID_TO_DT, 'YYYY-MM-DD')  valid_to_dt ,
            d.CHNG_NO  chng_no ,
            d.DEL_INDICT  del_indict ,
            d.DT_RCORD_CRT_ON  dt_rcord_crt_on ,
            d.USER_WHO_CRT_RCORD  user_who_crt_rcord ,
            d.CHNG_ON  chng_on ,
            d.NAME_PERSON_WHO_CHG_OBJ name_person_who_chg_obj
        FROM LOG0043M m, LOG0044D d , SYS0026M m2, SYS0013M sm
              WHERE m.BOM  = d.BOM
              AND d.BOM_COMPNT = m2.STK_CODE
              AND sm.CODE_ID = m2.STK_TYPE_ID  
              ORDER BY m.BOM, d.BOM_ITM_NODE_NO 
    </select>
</mapper>