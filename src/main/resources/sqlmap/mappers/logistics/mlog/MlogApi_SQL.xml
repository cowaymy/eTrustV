<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.coway.trust.biz.logistics.mlog.impl.MlogApiMapper">


	<select id="getRDCStockList" parameterType="Map" resultType="egovMap">
		SELECT
		WH_LOC_ID ,
		WH_LOC_CODE LOCATION_CODE ,
		WH_LOC_DESC LOCATION_NAME,
		WH_LOC_GB ,
		CODE_NAME LOCATION_TYPE,
		T3.STK_CODE PARTS_CODE,
		T3.STK_DESC ,
		QTY TOT_QTY,
		NVL(QTY - T5.bookqty,0) BOOKING_QTY,
		MOV_QTY INTRANSIT_QTY,
		T3.STK_TYPE_ID,S26.STK_ID PARTS_ID
		FROM SYS0028M T1, LOG0056M T3 , SYS0026m S26,
		(SELECT CDC_CODE, RDC_CODE
		FROM SYS0028M A
		WHERE WH_LOC_CODE = #{userId}) T2,
		(SELECT * FROM SYS0013M WHERE CODE_MASTER_ID = '339') T4,
		(SELECT loc_id , itm_code , sum(nvl(reqst_qty , 0)) - sum(nvl(mov_qty , 0))
		as bookqty from log0075m where nvl(final_cmplt , 'N') <![CDATA[<>]]>
		'Y' group by loc_id , itm_code ) T5
		WHERE T1.WH_LOC_GB = T4.CODE
		AND T3.STK_CODE = #{partsCode}
		AND T1.WH_LOC_ID = T3.LOC_ID
		AND T3.STK_CODE = T5.itm_code
		<!-- AND T3.LOC_ID=T5.LOC_ID -->
		AND T1.WH_LOC_CODE IN (T2.CDC_CODE, T2.RDC_CODE)
        AND T3.STK_CODE =S26.STK_CODE(+)
        AND S26.STK_ID=#{partsId}
	</select>


	<select id="getStockbyHolderList" parameterType="Map"
		resultType="egovMap">
	    SELECT
        O01.NAME CT_CODY_NAME,
        O01.MEM_CODE CT_CODY_ID,
        S28.CDC_CODE,
        S28.RDC_CODE,
        S28.WH_LOC_CODE LOGIN_CODE,
        L56.STK_CODE,
        S26.STK_ID STK_ID,
        L56.QTY STOCK_QTY
        FROM ORG0001D O01, SYS0028M S28,LOG0056M L56,SYS0026m S26
        WHERE 1 = 1
        AND O01.MEM_CODE=S28.WH_LOC_CODE
        AND S28.WH_LOC_ID =L56.LOC_ID
        AND L56.STK_CODE=S26.STK_CODE(+)
        AND L56.STK_TYPE_ID = S26.STK_TYPE_ID(+)
        AND L56.STK_CTGRY_ID = S26.STK_CTGRY_ID(+)
        AND O01.BRNCH= (SELECT WH_LOC_BRNCH_ID FROM SYS0028M WHERE WH_LOC_CODE =
        #{userId})
        AND L56.STK_CODE= #{partsCode}
        AND S26.STK_ID=#{partsId}
	</select>
	
     <select id="getCommonQty" parameterType="Map" resultType="egovMap">
		WITH CRDC
	     AS (SELECT WH_LOC_CODE , CDC_CODE , RDC_CODE
	                   FROM SYS0028M S28
	                  WHERE 1 = 1 AND S28.WH_LOC_CODE = #{userId}
	         )
			SELECT STK_CODE,
			       STK_DESC,
			       S28.WH_LOC_CODE,
			       S28.WH_LOC_GB,
			       DECODE (S28.WH_LOC_GB,
	                 '01', 'CDC',
	                 '02', 'RDC',
	                 '03', 'CT',
	                 '04', 'CODY',
	                 '05', 'CDC/RDC',
	                 S28.WH_LOC_GB) LOCATION_TYPE,
			       WH_LOC_DESC,
			       WH_LOC_ID,
			       NVL(QTY , 0),
			       NVL (BOOKQTY, 0) BOOKQTY,
			       QTY -NVL(BOOKQTY , 0) AVAIL_QTY,
			       L75.MOV_QTY INTRANSIT_QTY
			  FROM LOG0056M L56,
			       SYS0028M S28,
			       (  SELECT LOC_ID,
			                 ITM_CODE,
			                 SUM (NVL (REQST_QTY, 0)) - SUM (NVL (MOV_QTY, 0)) AS BOOKQTY,MOV_QTY
			            FROM LOG0075M
			           WHERE NVL (FINAL_CMPLT, 'N') <![CDATA[<>]]> 'Y'
			        GROUP BY LOC_ID, ITM_CODE,MOV_QTY) L75 ,
			        CRDC
			 WHERE     1 = 1
			       AND L56.LOC_ID = L75.LOC_ID(+)
			       AND L56.STK_CODE = L75.ITM_CODE(+)
			       AND S28.WH_LOC_ID = L56.LOC_ID(+)
			       AND S28.WH_LOC_CODE IN ( CRDC.WH_LOC_CODE , CRDC.CDC_CODE , CRDC.RDC_CODE)
			       AND #{partsCode} = L56.STK_CODE(+)
     </select> 
	
	
<!--     <select id="getCommonQty" parameterType="Map" resultType="egovMap">
      SELECT  (SELECT NVL(MOV_QTY , 0) FROM LOG0056M A ,  SYS0028M B WHERE A.LOC_ID = B.WH_LOC_ID AND B.WH_LOC_CODE = T.CDC_CODE AND A.STK_CODE = #{partsCode} AND A.STK_CTGRY_ID= #{partsId} ) by_CDC_In_Transit_Qty   
		        , (SELECT NVL(MOV_QTY , 0) FROM LOG0056M A ,  SYS0028M B WHERE A.LOC_ID = B.WH_LOC_ID AND B.WH_LOC_CODE = T.RDC_CODE AND A.STK_CODE = #{partsCode} AND A.STK_CTGRY_ID= #{partsId} ) by_RDC_In_Transit_Qty
		        , (SELECT NVL(MOV_QTY , 0) FROM LOG0056M A ,  SYS0028M B WHERE A.LOC_ID = B.WH_LOC_ID AND B.WH_LOC_CODE = T.WH_LOC_CODE AND A.STK_CODE = #{partsCode} AND A.STK_CTGRY_ID= #{partsId} ) by_User_In_Transit_Qty
		        , (SELECT QTY FROM LOG0056M A ,  SYS0028M B WHERE A.LOC_ID = B.WH_LOC_ID AND B.WH_LOC_CODE = T.CDC_CODE AND A.STK_CODE = #{partsCode} AND A.STK_CTGRY_ID= #{partsId} ) -NVL(L75.BOOKING_QTY , 0) by_CDC_Avail_Qty 
		        , (SELECT QTY FROM LOG0056M A ,  SYS0028M B WHERE A.LOC_ID = B.WH_LOC_ID AND B.WH_LOC_CODE = T.RDC_CODE AND A.STK_CODE = #{partsCode} AND A.STK_CTGRY_ID= #{partsId} ) -NVL(L75.BOOKING_QTY , 0) by_RDC_Avail_Qty  
		        , (SELECT QTY FROM LOG0056M A ,  SYS0028M B WHERE A.LOC_ID = B.WH_LOC_ID AND B.WH_LOC_CODE = T.WH_LOC_CODE AND A.STK_CODE = #{partsCode} AND A.STK_CTGRY_ID= #{partsId} ) -NVL(L75.BOOKING_QTY , 0) by_User_Avail_Qty 
		FROM SYS0028M T,
            (SELECT L75.LOC_ID, L75.ITM_CODE,SUM (REQST_QTY) - SUM (NVL (MOV_QTY, 0)) AS BOOKING_QTY
         FROM LOG0075M L75
           WHERE     NVL (L75.FINAL_CMPLT, 'N') <![CDATA[<>]]>'Y'
                 AND L75.REQST_NO IN (SELECT REQST_NO
                                        FROM LOG0047M
                                       WHERE NVL (REQST_DEL, 'N') <![CDATA[<>]]> 'Y')
                                       AND L75.ITM_CODE=#{partsCode}
		        GROUP BY L75.LOC_ID, L75.ITM_CODE) L75
		  WHERE WH_LOC_CODE = #{locCode}
		  AND T.WH_LOC_ID=L75.LOC_ID
    </select> -->




	<select id="getCt_CodyList" parameterType="Map" resultType="egovMap">
		SELECT O01.NAME CT_CODY_NAME,
		O01.MEM_CODE CT_CODY_ID
		FROM ORG0001D O01, SYS0028M S28
		WHERE 1 = 1
		AND O01.MEM_CODE = S28.WH_LOC_CODE
		AND O01.BRNCH = (SELECT WH_LOC_BRNCH_ID
		FROM SYS0028M
		WHERE WH_LOC_CODE = #{userId})
	</select>


	<!-- <select id="getRDCStockList" parameterType="Map" resultType="egovMap"> -->
	<!-- select -->
	<!-- wh_loc_code, wh_loc_desc, NVL(qty, 0) qty, NVL(qty - l75.bookqty,0) 
		AS available_qty -->
	<!-- from sys0028m , (select * from log0056m where stk_code =#{MaterialCode}) 
		l56, -->
	<!-- (select loc_id , itm_code , sum(nvl(reqst_qty , 0)) - sum(nvl(mov_qty 
		, 0)) as bookqty from log0075m where nvl(final_cmplt , 'N') <![CDATA[<>]]> 
		'Y' group by loc_id , itm_code ) l75 -->
	<!-- where wh_loc_gb = '02' -->
	<!-- and wh_loc_id = l56.loc_id(+) -->
	<!-- and l56.stk_code = l75.itm_code(+) -->
	<!-- and cdc_code = (select cdc_code from sys0028m where wh_loc_code = 'CT100755') -->
	<!-- </select> -->

    <select id="getInventoryOverallStock" parameterType="Map" resultType="egovMap">
     SELECT L56.STK_CODE parts_Code, S26.STK_ID parts_Id, S26.STK_DESC parts_Name, L56.QTY stock_Qty, L63.SERIAL_NO serial_No
	  FROM LOG0056M L56 , 
	       LOG0063D L63 , 
	       SYS0026M S26
	 WHERE 1 = 1
	   AND L56.STK_CODE = S26.STK_CODE
	   AND L56.STK_CODE = L63.MATNR(+)
	   AND L56.LOC_ID   = L63.LOC_ID(+)
	   AND L56.STK_TYPE_ID=S26.STK_TYPE_ID
	   AND L56.STK_CTGRY_ID=S26.STK_CTGRY_ID
	   AND S26.STK_TYPE_ID in (62 , 63)
	   AND s26.STK_CTGRY_ID =#{productCategoryId}
	   AND L56.LOC_ID = (select wh_loc_id from sys0028m where WH_LOC_CODE =#{targetUserId})
    </select>

	<select id="getAllStockList" parameterType="Map" resultType="egovMap">
		SELECT
		l43.matrl_no,
		l44.BOM_COMPNT PARTS_CODE,
		s26.stk_desc PARTS_NAME,
		NVL (l56.qty, 0) STOCK_QTY,
		<!-- l56.serial_no, -->
<!-- 		NVL (l56.serial_no,' ') serial_no, -->
		 (LTRIM(RTRIM(NVL (l56.serial_no, ' ')))) serial_no,
		l56.STK_CTGRY_ID,l56.STK_TYPE_ID,
		s28.WH_LOC_CODE LOCATION_CODE,
		s28.WH_LOC_DESC LOCATION_NAME,
		s26.STK_ID parts_Id,
		s28.WH_LOC_BRNCH_ID branch_Code
		FROM log0043m l43,
		log0044d l44,
		(SELECT log0056m.*, log0063d.serial_no
		FROM log0056m, log0063d
		WHERE 1 = 1
		AND log0056m.stk_code = log0063d.MATNR(+)
		AND log0056m.loc_id = (select wh_loc_id from sys0028m where wh_loc_code =
		#{userId})) l56,
		sys0026m s26,
		sys0028m s28
		WHERE 1 = 1
		AND l44.BOM_COMPNT = l56.stk_code(+)
		AND l44.BOM_COMPNT = s26.stk_code
		AND l43.bom = l44.bom
		AND l56.STK_TYPE_ID in (62,63,61)
		AND l56.LOC_ID=s28.WH_LOC_ID
		<if test="productCode != null and productCode !=''">
			AND l43.matrl_no = #{productCode}
		</if>
	   <if test="searchType == 1 ">
            AND l44.BOM_COMPNT=#{searchKeyword}
        </if>
		<if test="searchType == 2 ">
			AND UPPER(s26.stk_desc) LIKE UPPER(#{searchKeyword}) || '%'
		</if>
		<if test="productId != null and productId !=''">
		AND s26.STK_ID=#{productId}
		</if>
		GROUP BY
		l43.matrl_no,l44.BOM_COMPNT,l56.qty,l56.serial_no,l56.STK_CTGRY_ID,l56.STK_TYPE_ID,s26.stk_desc,s28.WH_LOC_CODE,s28.WH_LOC_DESC, s26.STK_ID,
        s28.WH_LOC_BRNCH_ID
		<!-- AND l43.MATRL_NO = '110181' -->
	</select>

	<select id="getInventoryStockByHolder" parameterType="Map"
		resultType="egovMap">
		SELECT
		O01.NAME CT_CODY_NAME,O01.MEM_CODE CT_CODY_ID,
		T1.BOM_COMPNT PARTS_CODE,T1.stk_desc PARTS_NAME ,T1.QTY STOCK_QTY ,T1.serial_no SERIAL_NO ,T1.LOC_ID,T1.STK_CTGRY_ID PARTS_ID
		FROM ORG0001D O01, SYS0028M S28,
		(SELECT l43.bom,
		l43.matrl_no,
		l44.BOM_COMPNT,
		NVL (l56.qty, 0) qty,
		l56.serial_no,
		l56.STK_CTGRY_ID,l56.STK_TYPE_ID,
		l56.LOC_ID,
		s26.stk_desc
		FROM log0043m l43,
		log0044d l44,
		(SELECT log0056m.*, log0063d.serial_no
		FROM log0056m, log0063d
		WHERE 1 = 1
		AND log0056m.stk_code = log0063d.MATNR(+))l56,
		sys0026m s26
		WHERE 1 = 1
		AND l44.BOM_COMPNT = l56.stk_code(+)
		AND l44.BOM_COMPNT = s26.stk_code
		AND l43.bom = l44.bom
		AND l56.STK_TYPE_ID in(62,63))T1
		WHERE 1 = 1
		AND O01.MEM_CODE=S28.WH_LOC_CODE
		AND O01.BRNCH =(select USER_BRNCH_ID from sys0047m where
		USER_NAME=#{userId})
		AND S28.WH_LOC_ID=T1.LOC_ID
		<if test="searchType == 1 ">
            AND T1.BOM_COMPNT= #{searchKeyword}
        </if>
        <if test="searchType == 2 ">
            AND UPPER(T1.stk_desc) LIKE UPPER(#{searchKeyword}) || '%'
        </if>
	</select>

	<select id="StockReceiveList" parameterType="Map" resultType="egovMap">
		SELECT L47.REQST_NO SMO_NO,
		L54.DELVRY_GI_DT GI_DATE,
		L54.DELVRY_GR_DT GR_DATE,
		L55.DELVRY_NO DELYNO,
		DBMS_LOB.SUBSTR (S28C.WH_LOC_DESC, 4000) GI_LOCATION_NAME,
		DBMS_LOB.SUBSTR (S28Q.WH_LOC_CODE, 4000) LOCATION_CODE,
		S28C.WH_LOC_CODE GI_LOCATION_CODE,
		DECODE (l47.PRIDIC_FRQNCY,
		'A', 'Auto',
		'M', 'Manual',
		l47.PRIDIC_FRQNCY)
		REQ_TYPE,
		S28Q.WH_LOC_DESC,
		 nvl(l47.USER_FULL_NAME,L54.CRT_USER_ID)  GI_CUST_NAME,
		L47.REQST_STUS req_Status
		FROM LOG0047M L47,
		LOG0048D L48,
		LOG0054M L54,
		LOG0055D L55,
		sys0047m l47,
		(SELECT *
		FROM SYS0013M
		WHERE CODE_MASTER_ID = 306) TRAN,
		(SELECT *
		FROM SYS0013M
		WHERE CODE_MASTER_ID = 308) TRAND,
		(SELECT *
		FROM SYS0013M
		WHERE CODE_MASTER_ID = 42) UOMT,
		(SELECT * FROM SYS0028M WHERE WH_LOC_CODE = #{userId}) S28Q, 
<!-- 		SYS0028M S28Q, -->
		SYS0028M S28C
		<!-- SYS0028M S28Q -->
		WHERE 1 = 1
		AND L47.TRNSC_TYPE = TRAN.CODE
		AND L47.TRNSC_TYPE_DTL = TRAND.CODE
		AND L47.RCIV_CDC_RDC = S28C.WH_LOC_ID(+)
		AND L47.REQST_CDC_RDC = S28Q.WH_LOC_ID(+)
		AND L54.CRT_USER_ID=l47.user_id(+)
		AND L48.UOM = UOMT.CODE_ID
		AND L48.ITM_CODE = L55.ITM_CODE
		AND L54.DELVRY_NO = L55.DELVRY_NO
		AND L48.REQST_NO = L55.REQST_NO
		AND L47.REQST_NO = L48.REQST_NO
		AND L48.REQST_NO_ITM= L55.DELVRY_NO_ITM
		AND L54.DELVRY_GI_CMPLT = 'Y'
    	<if test="searchFromDate !=null and searchFromDate !=''">
			and to_char(l47.reqst_require_dt , 'yyyymmdd') <![CDATA[>=]]>
			TO_CHAR (TO_DATE (#{searchFromDate},   'YYYY/MM/DD'),'yyyymmdd')
		</if>
		<if test="searchToDate !=null and searchToDate !=''">
			and to_char(l47.reqst_require_dt , 'yyyymmdd') <![CDATA[<=]]>
			TO_CHAR (TO_DATE (#{searchToDate},   'YYYY/MM/DD'),'yyyymmdd')
		</if> 
<!-- 		  AND TO_CHAR(L47.REQST_REQUIRE_DT , 'YYYYMMDD') <![CDATA[>=]]> TO_CHAR (TO_DATE ('20170820',   'YYYY/MM/DD'),'YYYYMMDD') -->
<!--           AND TO_CHAR(L47.REQST_REQUIRE_DT , 'YYYYMMDD') <![CDATA[ <= ]]>TO_CHAR (TO_DATE ('20170827',   'YYYY/MM/DD'),'YYYYMMDD') -->
		<if test="searchType == 1 ">
			and l47.pridic_frqncy = 'A'
		</if>
		<if test="searchType == 2 ">
            and l47.pridic_frqncy = 'M'
        </if>
        <if test="searchStatus == 1 ">
          AND L47.REQST_STUS IN ('P')
        </if>
        <if test="searchStatus == 2 ">
           AND L47.REQST_STUS='C'
        </if>   
		GROUP BY  L47.REQST_NO,L54.DELVRY_GI_DT,L54.DELVRY_GR_DT,S28C.WH_LOC_DESC,L55.DELVRY_NO,l47.PRIDIC_FRQNCY,L47.REQST_STUS,S28Q.WH_LOC_CODE,S28C.WH_LOC_CODE,S28Q.WH_LOC_DESC,l47.USER_FULL_NAME,L54.CRT_USER_ID
	</select>


	<select id="selectStockReceiveSerial" parameterType="Map" resultType="egovMap">
		SELECT l55d.DELVRY_NO,
		l55d.ITM_CODE PARTS_CODE,
		l55d.ITM_NAME
		PARTS_NAME,
		l61d.SERIAL_NO SERIAL_NO,
		l55d.DELVRY_QTY REQUEST_QTY,
		l55d.DELVRY_NO_ITM SMO_NO_ITEM,
		l61d.PDELVRY_NO_ITM, 
		<!-- l61d.DELVRY_NO DELVRY_NO2, l61d.PDELVRY_NO_ITM, l61d.TTYPE, TO_CHAR 
			(l61d.CRT_DT, 'DD/MM/YYYY') CRT_DT, l61d.CRT_USER_ID -->
		s26m.STK_ID PARTS_ID	
		FROM LOG0055D l55d, LOG0061D l61d,sys0026m s26m
		WHERE l55d.DELVRY_NO = l61d.DELVRY_NO
		AND l55d.DELVRY_NO_ITM = l61d.PDELVRY_NO_ITM
		AND l55d.ITM_CODE=s26m.STK_CODE
		<!-- AND l61d.DELVRY_NO =  #{delyno} -->
		AND l61d.DELVRY_NO in ('DVR20170925151548077305','DVR20170928143958079780','DVR20170928163735999750')
		ORDER BY l61d.PDELVRY_NO_ITM, l61d.SERIAL_NO
	</select>

	<select id="getMyStockList" parameterType="Map" resultType="egovMap">
		SELECT L56.LOC_ID,
		L56.STK_CODE PARTS_CODE,
		L56.STK_DESC,
		L56.STK_TYPE_ID PARTS_TYPE,
		L56.STK_CTGRY_ID,
		QTY STOCK_QTY,
		WH_LOC_DESC,
		L63.SERIAL_NO PARTSSERIAL_NO,
		T1.REF_DOC_NO SERVICE_NO,
		QTY - NVL (L75.BOOKING_QTY, 0) STOCK_QTY,
		S26.STK_ID PARTS_ID
		FROM LOG0056M L56,
		SYS0028M S28,
		LOG0063D L63,
		SYS0026m S26,
		(SELECT L61.SERIAL_NO,
		L61.DELVRY_NO,
		L47.REQST_NO,
		L47.REF_DOC_NO
		FROM LOG0061D L61, LOG0055D L55, LOG0047M L47
		WHERE L61.DELVRY_NO = L55.DELVRY_NO AND L55.REQST_NO = L47.REQST_NO) T1,
		( SELECT l75.loc_id,
		l75.itm_code,
		SUM (reqst_qty) - SUM (NVL (mov_qty, 0)) AS booking_qty
		FROM log0075m l75
		WHERE NVL (l75.final_cmplt, 'N') <![CDATA[<>]]> 'Y'
		AND l75.reqst_no IN (SELECT reqst_no
		FROM log0047m
		WHERE NVL (REQST_DEL, 'N') <![CDATA[<>]]> 'Y')
		GROUP BY l75.loc_id, l75.itm_code) L75
		WHERE 1 = 1
		AND L63.SERIAL_NO = T1.SERIAL_NO(+)
		AND L56.STK_CODE = L63.MATNR(+)
		AND L56.LOC_ID = L63.LOC_ID(+)
		AND L56.STK_CODE = L75.ITM_CODE(+)
		AND L56.LOC_ID = L75.LOC_ID(+)
		AND L56.STK_CODE =S26.STK_CODE(+)
		AND L56.LOC_ID = S28.WH_LOC_ID
		AND S28.WH_LOC_ID = (SELECT WH_LOC_ID FROM sys0028m WHERE WH_LOC_CODE = #{userId})
		GROUP BY L56.LOC_ID,L56.STK_CODE,L56.STK_DESC,L56.STK_TYPE_ID, L56.STK_CTGRY_ID,QTY,WH_LOC_DESC,L63.SERIAL_NO,T1.REF_DOC_NO,QTY - NVL (L75.BOOKING_QTY, 0) ,S26.STK_ID 
    </select>

	<select id="getReturnPartsSearch" parameterType="Map" resultType="egovMap">
		SELECT s28m.WH_LOC_STK_GRAD STOCK_GRADE,
		l56.STK_CODE PARTS_CODE,
		l56.STK_DESC PARTS_NAME,
		l56.STK_TYPE_ID,
		l56.STK_CTGRY_ID,
		l56.QTY STOCK_QTY,
		S26.STK_ID PARTS_ID,
		L63.SERIAL_NO
		FROM sys0028m s28m, LOG0056M L56 , SYS0026M S26 , LOG0063D L63
		WHERE 1 =1
		AND L56.STK_CODE = L63.MATNR(+)
		AND L56.LOC_ID = L63.LOC_ID(+)
		AND L56.STK_CODE = S26.STK_CODE
		AND L56.STK_TYPE_ID = 61
		AND L56.QTY > 0
		AND L56.LOC_ID=s28m.WH_LOC_ID
		 <if test="searchType == 1 ">
			AND l56.STK_CODE=#{searchKeyword}
		</if> 
		<if test="searchType == 2 ">
			AND UPPER(l56.STK_DESC) LIKE UPPER(#{searchKeyword}) || '%'
		</if>
		AND s28m.WH_LOC_CODE= #{userId}
	</select> 


<!-- <select id="getAlternativeFilterList" parameterType="Map" resultType="egovMap"> -->
<!-- 	SELECT -->
<!-- 	MATRL_NO PRODUCT_CODE,S26.STK_ID PRODUCT_ID,S26.STK_DESC FILTER_NAME,BOM_COMPNT FILTER_CODE,L44.ALTER_ITM_GRP,L44.USE_PROBABILTIY,L44.ALTER_ITM_RANK_ORD,L44.VALID_FROM_DT,L44.VALID_TO_DT, -->
<!-- 	case when l44.use_probabiltiy = 100 and alter_itm_rank_ord = 1 then  -->
<!-- 	'Main' -->
<!-- 	else 'Alternative' -->
<!-- 	end title -->
<!-- 	FROM LOG0043M L43,LOG0044D L44,SYS0026M S26 -->
<!-- 	WHERE 1=1 -->
<!-- 	AND L43.BOM=L44.BOM -->
<!-- 	AND L44.BOM_COMPNT = S26.STK_CODE -->
<!-- 	AND S26.STK_TYPE_ID in(62,63) -->
<!-- 	AND L44.ALTER_ITM_GRP IS NOT NULL -->
<!-- </select>  -->


	<select id="getAlternativeFilterMList" parameterType="Map" resultType="egovMap">
	  SELECT
	    MATRL_NO PRODUCT_CODE,S26.STK_ID PRODUCT_ID,S26.STK_DESC FILTER_NAME,BOM_COMPNT FILTER_CODE,L44.ALTER_ITM_GRP FILTER_GROUP_CODE,L44.USE_PROBABILTIY,L44.ALTER_ITM_RANK_ORD,L44.VALID_FROM_DT,L44.VALID_TO_DT,'Main' AS DIVISION_CODE
	    FROM LOG0043M L43,LOG0044D L44,SYS0026M S26
	    WHERE 1=1
	    AND L43.BOM=L44.BOM
	    AND L44.BOM_COMPNT = S26.STK_CODE
	    AND S26.STK_TYPE_ID in(62,63)
	    AND L44.ALTER_ITM_GRP IS NOT NULL
	    AND  l44.use_probabiltiy = 100 and alter_itm_rank_ord = 1
	</select> 

	<select id="getAlternativeFilterDList" parameterType="Map" resultType="egovMap">
	    SELECT
	    MATRL_NO PRODUCT_CODE,S26.STK_ID PRODUCT_ID,S26.STK_DESC FILTER_NAME,BOM_COMPNT FILTER_CODE,L44.ALTER_ITM_GRP FILTER_GROUP_CODE,L44.USE_PROBABILTIY,L44.ALTER_ITM_RANK_ORD,L44.VALID_FROM_DT,L44.VALID_TO_DT,'Alternative' AS DIVISION_CODE
	    FROM LOG0043M L43,LOG0044D L44,SYS0026M S26
	    WHERE 1=1
	    AND L43.BOM=L44.BOM
	    AND L44.BOM_COMPNT = S26.STK_CODE
	    AND S26.STK_TYPE_ID in(62,63)
	    AND L44.ALTER_ITM_GRP IS NOT NULL
	    AND l44.use_probabiltiy != 100 and alter_itm_rank_ord != 1
	    AND  L44.VALID_FROM_DT <![CDATA[<= ]]>  sysdate 
        AND  L44.VALID_TO_DT <![CDATA[<= ]]> sysdate
	</select> 
	

	<select id="getItemBankLocationList" parameterType="Map" resultType="egovMap">
		WITH CRDC
	         AS (SELECT WH_LOC_CODE , CDC_CODE , RDC_CODE
	                       FROM SYS0028M S28
	                      WHERE 1 = 1 AND S28.WH_LOC_CODE =#{userId}
	             )     
	            SELECT 
	                   S28.WH_LOC_CODE LOCATION_CODE,
	                   S28.WH_LOC_GB,
	                   DECODE (S28.WH_LOC_GB,
	                     '01', 'CDC',
	                     '02', 'RDC',
	                     '03', 'CT',
	                     '04', 'CODY',
	                     '05', 'CDC/RDC',
	                     S28.WH_LOC_GB) LOCATION_TYPE,
	                   S28.WH_LOC_DESC LOCATION_NAME,
	                   S28.WH_LOC_ID
	              FROM   SYS0028M S28,CRDC        
	             WHERE     1 = 1
	                   AND S28.WH_LOC_CODE IN ( CRDC.WH_LOC_CODE , CRDC.CDC_CODE , CRDC.RDC_CODE)
	</select> 
	
	<select id="getItemBankItemList" resultType="egovMap">
	    SELECT
	              CODE_ID  ITEM_CODE,
	              CODE ,
	              CODE_NAME ITEM_NAME,
	              DBMS_LOB.SUBSTR (CODE_DESC, 4000) DESCRIPTION
	        FROM SYS0013M
	        WHERE DISAB = 0
	        AND CODE_MASTER_ID = '63'
	</select>

	<select id="getCommonReqHeader" parameterType="Map" resultType="egovMap">
		SELECT
		LG47M.REQST_NO smo_No,
		DECODE (LG47M.PRIDIC_FRQNCY,
        'A', 'Auto',
        'M', 'Manual',
        LG47M.PRIDIC_FRQNCY)
        REQ_TYPE,
        LG47M.REQST_STUS REQ_STATUS,
		LG47M.REQST_CDC_RDC GI_LOCATION_CODE,
		SY28M.WH_LOC_DESC gi_Cust_Name,
		LG54M.DELVRY_GI_DT GI_DATE,
		LG54M.DELVRY_GR_DT GR_DATE
		FROM SYS0028M SY28M ,LOG0047M LG47M ,LOG0054M LG54M
		WHERE 1=1
		AND LG47M.REQST_NO = LG54M.REQST_NO(+)
        AND LG47M.TRNSC_TYPE=LG54M.TRNSC_TYPE(+)
        AND LG47M.TRNSC_TYPE = 'UM'
		<if test="reqStatus eq 'MRRL'.toString() ">
        AND SY28M.WH_LOC_ID = LG47M.REQST_CDC_RDC
        </if>
		<if test="reqStatus eq 'MROL'.toString() ">
		AND SY28M.WH_LOC_ID = LG47M.RCIV_CDC_RDC
		</if>
		<if test="reqStatus eq 'MRRL'.toString() ">
		AND LG47M.REQST_CDC_RDC = (SELECT WH_LOC_ID FROM SYS0028M WHERE WH_LOC_CODE =#{userId})
		</if>
		<if test="reqStatus eq 'MROL'.toString() ">
	    AND LG47M.RCIV_CDC_RDC = (SELECT WH_LOC_ID FROM SYS0028M WHERE WH_LOC_CODE =#{userId})
	    </if>
        <if test="searchStatus == 1 ">
		  AND LG47M.REQST_STUS IN ('O')
		</if>
        <if test="searchStatus == 2 ">
           AND LG47M.REQST_STUS='C'
        </if>	
         <if test="searchType == 1 ">
            and LG47M.PRIDIC_FRQNCY = 'A'
        </if>
        <if test="searchType == 2 ">
            and LG47M.PRIDIC_FRQNCY = 'M'
        </if>
         <if test="searchFromDate !=null and searchFromDate !=''">
            AND TO_CHAR(LG47M.REQST_REQUIRE_DT , 'YYYYMMDD') <![CDATA[>=]]>
            TO_CHAR (TO_DATE (#{searchFromDate},   'YYYY/MM/DD'),'YYYYMMDD')
        </if>
        <if test="searchToDate !=null and searchToDate !=''">
            AND TO_CHAR(LG47M.REQST_REQUIRE_DT , 'YYYYMMDD') <![CDATA[<=]]>
            TO_CHAR (TO_DATE (#{searchToDate},   'YYYY/MM/DD'),'YYYYMMDD')
        </if> 
	</select>

    <select id="getCommonReqParts" parameterType="Map" resultType="egovMap">
	SELECT
	LG48D.REQST_NO SMO_NO,
	LG48D.REQST_NO_ITM SMO_NO_ITEM,
	SY26M.STK_ID PARTS_ID,
	LG48D.ITM_CODE PARTS_CODE,
	LG48D.ITM_NAME PARTS_NAME,
	LG48D.REQST_QTY REQUEST_QTY,
	SY26M.SERIAL_CHK ,
	LG55D.DELVRY_QTY SELECT_QTY,
	LG61D.SERIAL_NO SERIAL_NO
	FROM
	LOG0048D LG48D, LOG0055D LG55D, SYS0026M SY26M,LOG0061D LG61D
	WHERE 1=1
	AND LG48D.REQST_NO = LG55D.REQST_NO (+)
	AND LG55D.DELVRY_NO = LG61D.DELVRY_NO(+)
	AND LG55D.DELVRY_NO_ITM = LG61D.PDELVRY_NO_ITM(+)
	AND LG48D.ITM_CODE=LG55D.ITM_CODE(+)
	AND NVL(LG48D.REQST_DEL , 'N') = 'N'
	AND LG48D.ITM_CODE=SY26M.STK_CODE
	AND LG48D.REQST_NO =#{smoNo}
	GROUP BY LG48D.REQST_NO, LG48D.REQST_NO_ITM, SY26M.STK_ID ,LG48D.ITM_CODE,
	LG48D.ITM_NAME, LG48D.REQST_QTY,SY26M.SERIAL_CHK,
	LG55D.DELVRY_QTY,LG61D.SERIAL_NO
    </select>

    <select id="getAuditStockResultDetail" parameterType="Map" resultType="egovMap">
	SELECT
	LG71M.INVNTRY_NO inven_Adjust_No
	,LG72M.SAVE_YN adjust_Y_N
	,TO_CHAR (LG71M.CRT_DATE, 'YYYYMMDD') CRT_DATE
	,LG71M.BASE_DT
	,LG72M.LOC_ID
	,SY28M.WH_LOC_CODE
	,LG73D.SYS_QTY sys_Qty
	, (LG73D.SYS_QTY - LG73D.CNT_QTY) DIFF_QTY
	,LG73D.CNT_QTY counted_Qty
	,LG73D.ITM_ID inven_Adjust_No_Item
	,SY26M.STK_CODE parts_Code
	,LG73D.ITM_NM parts_Name
	,LG73D.SERIAL_CHK
	,LG62M.SERIAL_NO serial_No
	,SY26M.STK_ID parts_Id
	FROM LOG0071M LG71M, LOG0072M LG72M, LOG0073D LG73D,SYS0026M
	SY26M,
	LOG0062M LG62M , SYS0028M SY28M
	WHERE 1 = 1
	AND LG71M.INVNTRY_NO =
	LG72M.INVNTRY_NO
	AND LG72M.INVNTRY_LOC_ID = LG73D.INVNTRY_LOC_ID
	AND
	LG73D.ITM_ID=SY26M.STK_ID
	AND SY26M.STK_CODE = LG62M.MATNR
	AND SY28M.WH_LOC_ID=LG72M.LOC_ID
	AND SY28M.WH_LOC_CODE=#{userId}
	AND LG71M.INVNTRY_NO=#{invenAdjustNo}
<!-- 	AND LG72M.LOC_ID = (SELECT WH_LOC_ID FROM SYS0028M WHERE WH_LOC_CODE -->
<!-- 	=#{userId}) -->
	AND SUBSTR (LG71M.BASE_DT, 0, 6) = TO_CHAR (TO_DATE (#{adjustBaseMonth},    'YYYY/MM'), 'YYYYMM')
</select>


<select id="getStockTransferReqStatusMList" parameterType="Map" resultType="egovMap">
  SELECT
        LG47M.REQST_NO smo_No,
        DECODE (LG47M.PRIDIC_FRQNCY,
        'A', 'Auto',
        'M', 'Manual',
        LG47M.PRIDIC_FRQNCY)
        REQ_TYPE,
        LG47M.REQST_STUS REQ_STATUS,
        LG47M.RCIV_CDC_RDC requestor_Id,<!-- 추후에 구분자로 분리예정 -->
        SY28M.WH_LOC_DESC requestor_Name, <!-- 추후에 구분자로 분리예정 -->
        TO_CHAR(LG47M.REQST_REQUIRE_DT, 'YYYYMMDD') req_Date
        FROM SYS0028M SY28M ,LOG0047M LG47M
        WHERE 1=1
        AND SY28M.WH_LOC_ID = LG47M.RCIV_CDC_RDC   <!-- 추후에 구분자로 분리예정 -->
        AND LG47M.TRNSC_TYPE = 'UM'
        AND LG47M.RCIV_CDC_RDC = (SELECT WH_LOC_ID FROM SYS0028M WHERE
        WH_LOC_CODE =#{userId})
        <if test="searchStatus == 1 ">
            AND LG47M.REQST_STUS IN ('O')
        </if>
        <if test="searchStatus == 2 ">
            AND LG47M.REQST_STUS='C'
        </if>
        <if test="searchFromDate !=null and searchFromDate !=''">
            AND TO_CHAR( LG47M.REQST_REQUIRE_DT,'YYYYMMDD') 
            BETWEEN TO_CHAR(TO_DATE(#{searchFromDate},'YYYYMMDD'), 'YYYYMMDD') 
         </if>
         <if test="searchToDate !=null and searchToDate !=''">
            AND TO_CHAR(TO_DATE(#{searchToDate},'YYYYMMDD'), 'YYYYMMDD') 
         </if>
</select>

<select id="getStockTransferReqStatusDList" parameterType="Map" resultType="egovMap">
SELECT
        LG48D.REQST_NO smo_No,
        LG48D.REQST_NO_ITM smo_No_Item,
        SY26M.STK_ID parts_Id,
        LG48D.ITM_CODE parts_Code,
        LG48D.ITM_NAME parts_Name,
        LG48D.REQST_QTY request_Qty,
        SY26M.SERIAL_CHK serial_No,
        LG55D.DELVRY_QTY select_Qty,
        SY26M.STK_TYPE_ID parts_Type
        FROM
        LOG0048D LG48D, LOG0055D LG55D, SYS0026M SY26M
        WHERE 1=1
        AND LG48D.REQST_NO = LG55D.REQST_NO (+)
        AND NVL(LG48D.REQST_DEL , 'N') = 'N'
        AND LG48D.ITM_CODE=SY26M.STK_CODE
        AND LG48D.REQST_NO =#{smoNo}
        ORDER BY LG48D.REQST_NO_ITM
</select>     



<select id="getNonBarcodeM" parameterType="Map" resultType="EgovMap">
	SELECT l72.INVNTRY_LOC_ID inven_Adjust_Loc_Id,l72.INVNTRY_NO inven_Adjust_No,l72.SAVE_YN adjust_Status,TO_CHAR (l71.CRT_DATE, 'YYYYMMDD') adjust_Create_Date,l71.BASE_DT adjust_Base_Date,l72.LOC_ID,s28.WH_LOC_DESC adjust_Location, 
	        (select count(1) from log0073d where INVNTRY_LOC_ID = l72.INVNTRY_LOC_ID) adjust_Normal_Qty,
	        (select count(1) from log0073d where nvl(CNT_QTY,0) > 0 and  INVNTRY_LOC_ID = l72.INVNTRY_LOC_ID) adjust_qty,
	         (select sum(sys_qty) from log0073d where INVNTRY_LOC_ID = l72.INVNTRY_LOC_ID) sys_qty,
	          (select sum(cnt_qty) from log0073d where INVNTRY_LOC_ID = l72.INVNTRY_LOC_ID) cnt_qty
	 from log0072m l72, log0071m l71,sys0028m s28
	 where 1=1
	 AND  l72.INVNTRY_NO=l71.INVNTRY_NO
	 AND l72.LOC_ID=s28.WH_LOC_ID
	 AND TO_DATE(l71.BASE_DT, 'YYYYMMDD')   BETWEEN ADD_MONTHS( TRUNC(sysdate,'MM'), -1 )  AND LAST_DAY(sysdate)
<!-- 	 AND TO_DATE(l71.BASE_DT, 'YYYYMMDD')   BETWEEN  -->
<!-- 	 LAST_DAY(ADD_MONTHS( TRUNC(sysdate,'MM'),  -2)) and  ADD_MONTHS( TRUNC(sysdate,'MM'),+1 )  -->
	 AND  l72.loc_id = 73055
</select>

<select id="getNonBarcodeDList" parameterType="String" resultType="EgovMap">
      select 
      INVNTRY_LOC_ID,
      SEQ inven_Adjust_No_Item,
      ITM_ID parts_Id,
      ITM_NM parts_Name,
      ITM_TYPE,
      SERIAL_CHK,
      SYS_QTY sys_Qty,
      CNT_QTY counted_Qty,
      CTGRY_TYPE,
         (select stk_code from sys0026m where stk_id = log0073d.itm_id) parts_Code 
  from log0073d where invntry_loc_id = #{invntryLocId}
</select>


<select id="getBarcodeDList" parameterType="String" resultType="EgovMap">
      select l72m.loc_id, l73d.SEQ inven_Adjust_No_Item,ITM_ID parts_Id,ITM_NM parts_Name,l63d.SERIAL_NO,l73d.SYS_QTY,(select stk_code from sys0026m where stk_id = l73d.itm_id) parts_Code  From log0073d l73d, log0072m l72m,log0063d l63d,sys0026m s26m 
	  where 1=1
	  AND l73d.INVNTRY_LOC_ID= l72m.INVNTRY_LOC_ID
	  AND l73d.ITM_ID=s26m.STK_ID
	  AND l63d.MATNR=s26m.STK_CODE
	  AND l72m.loc_id=l63d.loc_id
	  AND l73d.invntry_loc_id = #{invntryLocId}
</select>

<select id="getBarcodeCList" parameterType="String" resultType="EgovMap">
  SELECT l73d.ITM_ID parts_Id,l74d.SERIAL serial_No,
         (select stk_code from sys0026m where stk_id = l73d.itm_id) parts_Code 
  from log0073d l73d, log0074d l74d
  where 1=1 
    AND  l73d.INVNTRY_LOC_ID=l74d.INVNTRY_LOC_ID(+)
    AND   l73d.invntry_loc_id = #{invntryLocId}
</select>


	<!-- 현창배 작업 -->

	<select id="getBarcodeList" parameterType="Map" resultType="EgovMap">
		SELECT
		LG71M.INVNTRY_NO
		,LG72M.SAVE_YN
		,TO_CHAR (LG71M.CRT_DATE, 'DD/MM/YYYY') CRT_DATE
		,LG71M.BASE_DT
		,LG72M.LOC_ID
		,SY28M.WH_LOC_CODE
		,LG73D.SYS_QTY
		, (LG73D.SYS_QTY - LG73D.CNT_QTY) DIFF_QTY
		,LG73D.CNT_QTY
		,LG73D.ITM_ID
		,SY26M.STK_CODE
		,LG73D.ITM_NM
		,LG73D.SERIAL_CHK
		,LG62M.SERIAL_NO
		FROM LOG0071M LG71M, LOG0072M LG72M, LOG0073D LG73D,SYS0026M SY26M,
		LOG0062M LG62M, SYS0028M SY28M
		WHERE 1 = 1
		AND LG71M.INVNTRY_NO = LG72M.INVNTRY_NO
		AND LG72M.INVNTRY_LOC_ID = LG73D.INVNTRY_LOC_ID
		AND LG73D.ITM_ID=SY26M.STK_ID
		AND SY26M.STK_CODE = LG62M.MATNR
		AND SY28M.WH_LOC_ID=LG72M.LOC_ID
		AND LG73D.SERIAL_CHK = 'Y'
		AND LG72M.LOC_ID = (SELECT WH_LOC_ID FROM SYS0028M WHERE WH_LOC_CODE
		=#{userId})
		AND SUBSTR (LG72M.DOC_DT, 0, 6) = TO_CHAR (TO_DATE (#{adjustBaseDate},
		'DD/MM/YYYY'), 'YYYYMM')
	</select>
<!-- 	<select id="getNonBarcodeList" parameterType="Map" resultType="EgovMap"> -->
<!-- 		SELECT -->
<!-- 		LG71M.INVNTRY_NO -->
<!-- 		,LG72M.SAVE_YN -->
<!-- 		,TO_CHAR (LG71M.CRT_DATE, 'DD/MM/YYYY') CRT_DATE -->
<!-- 		,LG71M.BASE_DT -->
<!-- 		,LG72M.LOC_ID -->
<!-- 		,SY28M.WH_LOC_CODE -->
<!-- 		,LG73D.SYS_QTY -->
<!-- 		, (LG73D.SYS_QTY - LG73D.CNT_QTY) DIFF_QTY -->
<!-- 		,LG73D.CNT_QTY -->
<!-- 		,LG73D.ITM_ID -->
<!-- 		,SY26M.STK_CODE -->
<!-- 		,LG73D.ITM_NM -->
<!-- 		,LG73D.SERIAL_CHK -->
<!-- 		,LG62M.SERIAL_NO -->
<!-- 		FROM LOG0071M LG71M, LOG0072M LG72M, LOG0073D LG73D,SYS0026M SY26M, -->
<!-- 		LOG0062M LG62M , SYS0028M SY28M -->
<!-- 		WHERE 1 = 1 -->
<!-- 		AND LG71M.INVNTRY_NO = LG72M.INVNTRY_NO -->
<!-- 		AND LG72M.INVNTRY_LOC_ID = LG73D.INVNTRY_LOC_ID -->
<!-- 		AND LG73D.ITM_ID=SY26M.STK_ID -->
<!-- 		AND SY26M.STK_CODE = LG62M.MATNR -->
<!-- 		AND SY28M.WH_LOC_ID=LG72M.LOC_ID -->
<!-- 		AND LG72M.LOC_ID = (SELECT WH_LOC_ID FROM SYS0028M WHERE WH_LOC_CODE -->
<!-- 		=#{userId}) -->
<!-- 		AND LG73D.SERIAL_CHK IS NULL -->
<!-- 		AND SUBSTR (LG72M.DOC_DT, 0, 6) = TO_CHAR (TO_DATE (#{adjustBaseDate}, -->
<!-- 		'DD/MM/YYYY'), 'YYYYMM') -->
<!-- 	</select> -->
	<select id="getStockAuditResult" parameterType="Map" resultType="EgovMap">
		SELECT
        LG71M.INVNTRY_NO inven_Adjust_No
        ,LG72M.SAVE_YN adjust_Status
        ,LG71M.BASE_DT adjust_Base_Date
        ,TO_CHAR (LG71M.CRT_DATE, 'YYYYMMDD') adjust_Create_Date
        ,LG72M.LOC_ID
        ,T10.WH_LOC_CODE adjust_Location
        ,LG73D.SYS_QTY
        ,LG73D.CNT_QTY
        ,LG73D.ITM_ID
        ,LG73D.ITM_NM
        ,LG73D.SERIAL_CHK
        FROM LOG0071M LG71M, LOG0072M LG72M, LOG0073D LG73D, (SELECT WH_LOC_ID,WH_LOC_CODE FROM SYS0028M WHERE WH_LOC_CODE
        =#{userId}) T10
        WHERE 1 = 1
        AND LG71M.INVNTRY_NO = LG72M.INVNTRY_NO
        AND LG72M.INVNTRY_LOC_ID = LG73D.INVNTRY_LOC_ID
        AND LG72M.LOC_ID = T10.WH_LOC_ID
        AND SUBSTR (LG71M.BASE_DT, 0, 6) = TO_CHAR (TO_DATE (#{adjustBaseMonth},
        'YYYYMM'), 'YYYYMM')
	</select>
	
	<select id="getStockPriceList" parameterType="Map" resultType="egovMap">
	 select S26T.STK_ID parts_Id,l44.BOM_COMPNT parts_Code,S26T.STK_DESC parts_Name,S26T.STK_CTGRY_ID,S26T.STK_TYPE_ID,1 price_Unit,s16.AMT parts_Price,
	 (select CODE_NAME from sys0013m where CODE_MASTER_ID ='94' AND CODE_ID='1150') currency
	from log0043m l43,  log0044d l44,SAL0016M s16  
	<if test="searchKinds !=null and searchKinds !=''">
	,(SELECT * FROM SYS0026M WHERE STK_TYPE_ID =#{searchKinds}) S26T 
	</if>
	where 1=1
	AND S26T.STK_ID = s16.STK_ID
	AND l44.BOM_COMPNT = S26T.stk_code(+)
	AND l43.bom=l44.bom
	AND l43.MATRL_NO=#{productCode}
	 <if test="searchType == 1 ">
            AND S26T.STK_CODE=#{searchKeyword}
     </if>
     <if test="searchType == 2 ">
           <!--  AND s26.STK_DESC LIKE #{searchKeyword}||'%' -->
          AND (LTRIM(RTRIM(S26T.STK_DESC))) LIKE #{searchKeyword}||'%'
      </if>
	group by S26T.STK_ID,l44.BOM_COMPNT,S26T.STK_DESC,S26T.STK_CTGRY_ID,S26T.STK_TYPE_ID,1,s16.AMT
	</select>

<!-- 	<resultMap id="movement" -->
<!-- 		type="com.coway.trust.biz.logistics.mlog.vo.StrockMovementVoForMobile" /> -->
<!-- 	<select id="getStockRequestStatusHeader" parameterType="Map" -->
<!-- 		resultMap="movement"> -->
<!-- 		SELECT -->
<!-- 		LG47M.REQST_NO smoNo, -->
<!-- 		LG47M. PRIDIC_FRQNCY reqType, -->
<!-- 		LG47M.REQST_STUS reqStatus, -->
<!-- 		LG47M.RCIV_CDC_RDC requestorId,추후에 구분자로 분리예정 -->
<!-- 		SY28M.WH_LOC_DESC requestorName, 추후에 구분자로 분리예정 -->
<!-- 		TO_CHAR(LG47M.REQST_REQUIRE_DT, 'YYYYMMDD') reqDate -->
<!-- 		FROM SYS0028M SY28M ,LOG0047M LG47M -->
<!-- 		WHERE 1=1 -->
<!-- 		AND SY28M.WH_LOC_ID = LG47M.RCIV_CDC_RDC   추후에 구분자로 분리예정 -->
<!-- 		AND LG47M.TRNSC_TYPE = 'UM' -->
<!-- 		AND LG47M.RCIV_CDC_RDC = (SELECT WH_LOC_ID FROM SYS0028M WHERE -->
<!-- 		WH_LOC_CODE =#{userId}) -->
<!--           <choose> <when test=""> AND LG47M.RCIV_CDC_RDC = (SELECT  -->
<!-- 			WH_LOC_ID FROM SYS0028M WHERE WH_LOC_CODE =#{userId}) </when> <otherwise>  -->
<!-- 			AND LG47M.REQST_CDC_RDC = (SELECT WH_LOC_ID FROM SYS0028M WHERE WH_LOC_CODE  -->
<!-- 			=#{userId}) </otherwise> </choose>  --> 
<!-- 	    AND TO_CHAR( LG47M.REQST_REQUIRE_DT,'YYYYMMDD')  -->
<!-- 		BETWEEN TO_CHAR(TO_DATE(#{searchFromDate},'DD/MM/YYYY'), 'YYYYMMDD')  -->
<!--  		AND TO_CHAR(TO_DATE(#{searchToDate},'DD/MM/YYYY'), 'YYYYMMDD')  -->
<!-- 		<if test="searchStatus eq 'requested'.toString() "> -->
<!-- 			AND LG47M.REQST_STUS IN ('O','P') -->
<!-- 		</if> -->
<!-- 		<if test="searchStatus eq 'done'.toString() "> -->
<!-- 			AND LG47M.REQST_STUS='C' -->
<!-- 		</if> -->
<!-- 		<if test="searchStatus eq 'rejected'.toString() "> -->
<!-- 			AND LG47M.REQST_DEL IS NOT NULL -->
<!-- 		</if> -->
<!-- 	</select> -->
	
<!-- 	<select id="getRequestStatusParts" parameterType="Map" -->
<!-- 		resultMap="movement"> -->
<!-- 		SELECT -->
<!-- 		LG48D.REQST_NO smoNoD, -->
<!-- 		LG48D.REQST_NO_ITM smoNoItem, -->
<!-- 		SY26M.STK_ID partsId, -->
<!-- 		LG48D.ITM_CODE partsCode, -->
<!-- 		LG48D.ITM_NAME partsName, -->
<!-- 		LG48D.REQST_QTY requestQty, -->
<!-- 		SY26M.SERIAL_CHK serialNo, -->
<!-- 		LG55D.DELVRY_QTY selectQty, -->
<!-- 		SY26M.STK_TYPE_ID partsType -->
<!-- 		FROM -->
<!-- 		LOG0048D LG48D, LOG0055D LG55D, SYS0026M SY26M -->
<!-- 		WHERE 1=1 -->
<!-- 		AND LG48D.REQST_NO = LG55D.REQST_NO (+) -->
<!-- 		AND NVL(LG48D.REQST_DEL , 'N') = 'N' -->
<!-- 		AND LG48D.ITM_CODE=SY26M.STK_CODE -->
<!-- 		AND LG48D.REQST_NO =#{reqstNo} -->
<!-- 		ORDER BY LG48D.REQST_NO_ITM -->
<!-- 	</select> -->
	
</mapper>