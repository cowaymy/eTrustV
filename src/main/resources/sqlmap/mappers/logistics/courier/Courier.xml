<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.coway.trust.biz.logistics.courier.impl.CourierMapper">
    <select id="selectCourierList" parameterType="Map" resultType="EgovMap">
		SELECT  
		         P1.CURIER_ID courierId
		        ,P1.CURIER_CODE courierCd
		        ,P1.CURIER_NAME courierNm
		        ,P1.CURIER_REG_NO regNo
		        ,P1.NAME country
		        ,P1.CURIER_CNTY_ID countryId
		        ,P1.NAME1 state
		        ,P1.CURIER_STATE_ID stateId
		        ,P1.AREA_NAME area
		        ,P1.CURIER_AREA_ID areaId
		        ,P1.CURIER_POST_CODE_ID postCd
		        ,P1.CURIER_CNTC_NO1 contactNo1
		        ,P1.CURIER_CNTC_NO2 contactNo2
		        ,P1.CURIER_FAX_NO faxNo
		        ,P1.C1 cnt
		    FROM (SELECT P1.C1 C1
		                ,P1.CURIER_ID CURIER_ID
		                ,P1.CURIER_CODE CURIER_CODE
		                ,P1.CURIER_NAME CURIER_NAME
		                ,P1.CURIER_REG_NO CURIER_REG_NO
		                ,P1.CURIER_CNTY_ID CURIER_CNTY_ID
		                ,P1.CURIER_STATE_ID CURIER_STATE_ID
		                ,P1.CURIER_AREA_ID CURIER_AREA_ID
		                ,P1.CURIER_POST_CODE_ID CURIER_POST_CODE_ID
		                ,P1.CURIER_CNTC_NO1 CURIER_CNTC_NO1
		                ,P1.CURIER_CNTC_NO2 CURIER_CNTC_NO2
		                ,P1.CURIER_FAX_NO CURIER_FAX_NO
		                ,P1.NAME NAME
		                ,P1.NAME1 NAME1
		                ,P1.AREA_NAME AREA_NAME
		                ,ROW_NUMBER () OVER (ORDER BY P1.CURIER_CODE ASC) ROW_NUMBER
		            FROM (SELECT G1.A1 C1
		                        ,F1.CURIER_ID CURIER_ID
		                        ,F1.CURIER_CODE CURIER_CODE
		                        ,F1.CURIER_NAME CURIER_NAME
		                        ,F1.CURIER_REG_NO CURIER_REG_NO
		                        ,F1.CURIER_CNTY_ID CURIER_CNTY_ID
		                        ,F1.CURIER_STATE_ID CURIER_STATE_ID
		                        ,F1.CURIER_AREA_ID CURIER_AREA_ID
		                        ,F1.CURIER_POST_CODE_ID CURIER_POST_CODE_ID
		                        ,F1.CURIER_CNTC_NO1 CURIER_CNTC_NO1
		                        ,F1.CURIER_CNTC_NO2 CURIER_CNTC_NO2
		                        ,F1.CURIER_FAX_NO CURIER_FAX_NO
		                        ,F1.NAME2 NAME
		                        ,F1.NAME3 NAME1
		                        ,F1.AREA_NAME AREA_NAME
		                    FROM (SELECT E1.CURIER_ID CURIER_ID
		                                ,E1.CURIER_CODE CURIER_CODE
		                                ,E1.CURIER_NAME CURIER_NAME
		                                ,E1.CURIER_REG_NO CURIER_REG_NO
		                                ,E1.CURIER_CNTY_ID CURIER_CNTY_ID
		                                ,E1.CURIER_STATE_ID CURIER_STATE_ID
		                                ,E1.CURIER_AREA_ID CURIER_AREA_ID
		                                ,E1.CURIER_POST_CODE_ID CURIER_POST_CODE_ID
		                                ,E1.CURIER_CNTC_NO1 CURIER_CNTC_NO1
		                                ,E1.CURIER_CNTC_NO2 CURIER_CNTC_NO2
		                                ,E1.CURIER_FAX_NO CURIER_FAX_NO
		                                ,E2.NAME NAME2
		                                ,E3.NAME NAME3
		                                ,E4.AREA_NAME AREA_NAME
		                            FROM SYS0016M E1 LEFT JOIN SYS0015M E2 ON E1.CURIER_CNTY_ID = E2.CNTY_ID
		                                 LEFT JOIN SYS0035M E3 ON E1.CURIER_STATE_ID = E3.STATE_ID
		                                 LEFT JOIN SYS0039M E4 ON E1.CURIER_AREA_ID = E4.AREA_ID
		                           WHERE 1 = E1.CURIER_STUS_ID) F1
		                         CROSS JOIN
		                         (SELECT COUNT (1) A1
		                            FROM (SELECT E5.CURIER_CODE CURIER_CODE
		                                        ,E5.CURIER_NAME CURIER_NAME
		                                        ,E5.CURIER_REG_NO CURIER_REG_NO
		                                        ,E5.CURIER_CNTY_ID CURIER_CNTY_ID
		                                        ,E5.CURIER_STATE_ID CURIER_STATE_ID
		                                        ,E5.CURIER_AREA_ID CURIER_AREA_ID
		                                        ,E5.CURIER_POST_CODE_ID CURIER_POST_CODE_ID
		                                        ,E5.CURIER_CNTC_NO1 CURIER_CNTC_NO1
		                                    FROM SYS0016M E5 LEFT JOIN SYS0015M E6
		                                         ON E5.CURIER_CNTY_ID = E6.CNTY_ID
		                                         LEFT JOIN SYS0035M E7 ON E5.CURIER_STATE_ID = E7.STATE_ID
		                                   WHERE E5.CURIER_STUS_ID = 1) F2
		                                 LEFT JOIN
		                                 SYS0039M T8 ON F2.CURIER_AREA_ID = T8.AREA_ID
		                           WHERE 1=1
		                             <if test="srchCourierCd !=null and srchCourierCd !=''">      
		                             ANDF2.CURIER_CODE LIKE  '%'||#{}||'%'
		                             </if>
		                             <if test="srchCourierNm !=null and srchCourierNm !=''">
		                             AND F2.CURIER_NAME LIKE  '%'||#{}||'%'
		                             </if>
		                             <if test="srchRegNo !=null and srchRegNo !=''">
		                             AND F2.CURIER_REG_NO LIKE  '%'||#{}||'%'
		                             </if>
		                             <if test="srchCntry !=null and srchCntry !=''">
		                             AND F2.CURIER_CNTY_ID = #{}
		                             </if>
		                             <if test="srchState !=null and srchState !=''">
		                             AND F2.CURIER_STATE_ID = #{}
		                             </if>
		                             <if test="srchArea !=null and srchArea !=''">
		                             AND F2.CURIER_AREA_ID = #{}
		                             </if>
		                             <if test="srchPstCd !=null and srchPstCd !=''">
		                             AND F2.CURIER_POST_CODE_ID = #{}
		                             </if>
		                             <if test="srchcontactNo !=null and srchcontactNo !=''">
		                             AND F2.CURIER_CNTC_NO1 LIKE  '%'||#{}||'%'
		                             </if>
		                             ) G1
		                     ) P1
		                ) P1
		   <![CDATA[                   
		   WHERE P1.ROW_NUMBER > 0
		   AND P1.ROW_NUMBER <= 10
		   ]]>
		ORDER BY P1.CURIER_CODE ASC
    </select>

</mapper>