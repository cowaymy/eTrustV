<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.coway.trust.biz.organization.organization.impl.NeoProAndHPListMapper">

    <!-- 
        CLOB 컬럼을 사용하기 위해서는 아래와 같이 resultMap을 선언 후
         <select id="selectClobData" parameterType="Map"  resultMap="clobMap"> 와 같이
          resultMap="clobMap" 을 사용해야 함.
    -->
    <resultMap id="clobMap" type="EgovMap">
        <result property="typeDesc" column="type_Desc" jdbcType="CLOB" javaType="java.lang.String"/>
    </resultMap>    
    
        <select id="selectNeoProAndHPList" parameterType="Map" resultMap="clobMap">
        <![CDATA[
SELECT GroupBy1.A1 C1  
  FROM ( SELECT COUNT(1)  A1  
         FROM ( SELECT vNEOPROANDHPLIST.MEM_ID MEM_ID  ,
                       vNEOPROANDHPLIST.MEM_CODE MEM_CODE  ,
                       vNEOPROANDHPLIST.MEM_NAME MEM_NAME  ,
                       vNEOPROANDHPLIST.JOIN_DT JOIN_DT  ,
                       vNEOPROANDHPLIST.HP_TYPE HP_TYPE  ,
                       vNEOPROANDHPLIST.TOP_ORG_CODE TOP_ORG_CODE  ,
                       vNEOPROANDHPLIST.ORG_CODE ORG_CODE  ,
                       vNEOPROANDHPLIST.GRP_CODE GRP_CODE  ,
                       vNEOPROANDHPLIST.DEPT_CODE DEPT_CODE  ,
                       vNEOPROANDHPLIST.TOT_NET TOT_NET  ,
                       vNEOPROANDHPLIST.CUR_MTH_NET CUR_MTH_NET  ,
                       vNEOPROANDHPLIST.PREV1_MTH_NET PREV1_MTH_NET  ,
                       vNEOPROANDHPLIST.PREV2_MTH_NET PREV2_MTH_NET  ,
                       vNEOPROANDHPLIST.PREV3_MTH_NET PREV3_MTH_NET  
                FROM GBSLCVD.ORG1003V vNEOPROANDHPLIST ) Extent1
          WHERE  ( Extent1.TOP_ORG_CODE = 'CRS0002' )
                   AND ( 'HP' = Extent1.HP_TYPE )
                   AND ( Extent1.PREV1_MTH_NET >= 0 )
                   AND ( Extent1.PREV2_MTH_NET >= 0 )
                   AND ( Extent1.PREV3_MTH_NET >= 0 ) ) GroupBy1
                             ]]>     
                             
        </select>
        
        
</mapper>        